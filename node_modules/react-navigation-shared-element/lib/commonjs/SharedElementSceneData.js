"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));var INVERT_OPTIONS={inputRange:[0,1],outputRange:[1,0]};var SharedElementSceneData=function(){function SharedElementSceneData(Component,navigation,route,navigatorId,nestingDepth){(0,_classCallCheck2.default)(this,SharedElementSceneData);(0,_defineProperty2.default)(this,"updateSubscribers",new Set());(0,_defineProperty2.default)(this,"ancestorNode",undefined);(0,_defineProperty2.default)(this,"nodes",{});(0,_defineProperty2.default)(this,"animationContextValue",void 0);(0,_defineProperty2.default)(this,"Component",void 0);(0,_defineProperty2.default)(this,"name",void 0);(0,_defineProperty2.default)(this,"navigatorId",void 0);(0,_defineProperty2.default)(this,"nestingDepth",void 0);(0,_defineProperty2.default)(this,"navigation",void 0);(0,_defineProperty2.default)(this,"route",void 0);this.Component=Component;this.navigation=navigation;this.route=route;this.navigatorId=navigatorId;this.nestingDepth=nestingDepth;this.name=Component.displayName||Component.name||(Component.constructor?Component.constructor.name:undefined)||'';}(0,_createClass2.default)(SharedElementSceneData,[{key:"setAnimimationContextValue",value:function setAnimimationContextValue(value){this.animationContextValue=value;}},{key:"getAnimValue",value:function getAnimValue(closing){var animationContextValue=this.animationContextValue;if(!animationContextValue)return;var progress=animationContextValue.current.progress;return closing?progress.interpolate(INVERT_OPTIONS):progress;}},{key:"getAncestor",value:function getAncestor(){return this.ancestorNode;}},{key:"setAncestor",value:function setAncestor(ancestorNode){if(this.ancestorNode===ancestorNode)return;this.ancestorNode=ancestorNode||undefined;this.emitUpdateEvent('ancestor',this.ancestorNode,'');}},{key:"addNode",value:function addNode(id,node){this.nodes[id]=node;this.emitUpdateEvent('add',node,id);}},{key:"removeNode",value:function removeNode(id,node){delete this.nodes[id];this.emitUpdateEvent('remove',node,id);}},{key:"getNode",value:function getNode(id){return this.nodes[id];}},{key:"addUpdateListener",value:function addUpdateListener(handler){var _this=this;this.updateSubscribers.add(handler);return function(){return _this.updateSubscribers.delete(handler);};}},{key:"emitUpdateEvent",value:function emitUpdateEvent(eventType,node,id){this.updateSubscribers.forEach(function(handler){return handler(eventType,node,id);});}}]);return SharedElementSceneData;}();exports.default=SharedElementSceneData;
//# sourceMappingURL=SharedElementSceneData.js.map