{"version":3,"sources":["SharedElement.tsx"],"names":["SharedElement","props","node","sceneData","sharedId","removeNode","addNode","id","otherProps","onSetNode","React","Component"],"mappings":"4lCAAA,oDACA,qEAKA,8F,mGAQMA,CAAAA,a,mFAKJ,uBAAYC,KAAZ,CAAuC,4DACrC,yGAAMA,KAAN,GADqC,+EAJE,IAIF,qFAHZ,EAGY,sFAFY,IAEZ,sFAqCnB,SAACC,IAAD,CAAoC,CACtD,GAAI,MAAKA,IAAL,GAAcA,IAAlB,CAAwB,CACtB,OACD,CACD,GAAI,MAAKC,SAAL,EAAkB,MAAKD,IAAvB,EAA+B,MAAKE,QAAxC,CAAkD,CAChD,MAAKD,SAAL,CAAeE,UAAf,CAA0B,MAAKD,QAA/B,CAAyC,MAAKF,IAA9C,EACD,CACD,MAAKA,IAAL,CAAYA,IAAZ,CACA,GAAI,MAAKC,SAAL,EAAkB,MAAKD,IAAvB,EAA+B,MAAKE,QAAxC,CAAkD,CAChD,MAAKD,SAAL,CAAeG,OAAf,CAAuB,MAAKF,QAA5B,CAAsC,MAAKF,IAA3C,EACD,CACD,MAAKA,IAAL,CAAYA,IAAZ,CACD,CAjDsC,EAErC,MAAKE,QAAL,CAAgBH,KAAK,CAACM,EAAtB,CAFqC,aAGtC,C,8EAEQ,iCAIH,KAAKN,KAJF,CAELM,EAFK,aAELA,EAFK,CAGFC,UAHE,2DAKP,MACE,qBAAC,kCAAD,CAA2B,QAA3B,kDACG,SAAAL,SAAS,CAAI,CAKZ,MAAI,CAACA,SAAL,CAAiBA,SAAjB,CACA,MAAO,qBAAC,uCAAD,0BAAsBK,UAAtB,EAAkC,MAAM,CAAE,MAAI,CAACC,SAA/C,kDAAP,CACD,CARH,CADF,CAYD,C,+DAEoB,IACXF,CAAAA,EADW,CACJ,KAAKN,KADD,CACXM,EADW,CAEnB,GAAI,KAAKH,QAAL,GAAkBG,EAAtB,CAA0B,CACxB,GAAI,KAAKJ,SAAL,EAAkB,KAAKC,QAAvB,EAAmC,KAAKF,IAA5C,CAAkD,CAChD,KAAKC,SAAL,CAAeE,UAAf,CAA0B,KAAKD,QAA/B,CAAyC,KAAKF,IAA9C,EACD,CACD,KAAKE,QAAL,CAAgBG,EAAhB,CACA,GAAI,KAAKJ,SAAL,EAAkB,KAAKC,QAAvB,EAAmC,KAAKF,IAA5C,CAAkD,CAChD,KAAKC,SAAL,CAAeG,OAAf,CAAuB,KAAKF,QAA5B,CAAsC,KAAKF,IAA3C,EACD,CACF,CACF,C,2BAxCyBQ,KAAK,CAACC,S,eAyDnBX,a","sourcesContent":["import * as React from 'react';\nimport {\n  SharedElement as RawSharedElement,\n  SharedElementProps as RawSharedElementProps,\n} from 'react-native-shared-element';\nimport { SharedElementNode } from './types';\nimport SharedElementSceneContext from './SharedElementSceneContext';\nimport SharedElementSceneData from './SharedElementSceneData';\n// import invariant from '../utils/invariant';\n\nexport type SharedElementProps = Omit<RawSharedElementProps, 'onNode'> & {\n  id: string;\n};\n\nclass SharedElement extends React.Component<SharedElementProps> {\n  private node: SharedElementNode | null = null;\n  private sharedId: string = '';\n  private sceneData: SharedElementSceneData | null = null;\n\n  constructor(props: SharedElementProps) {\n    super(props);\n    this.sharedId = props.id;\n  }\n\n  render() {\n    const {\n      id, //eslint-disable-line @typescript-eslint/no-unused-vars\n      ...otherProps\n    } = this.props;\n    return (\n      <SharedElementSceneContext.Consumer>\n        {sceneData => {\n          /*invariant(\n            sceneData != null,\n            'The SharedElementSceneContext is not set, did you forget to wrap your scene component with `createSharedElementScene(..)`?'\n          );*/\n          this.sceneData = sceneData;\n          return <RawSharedElement {...otherProps} onNode={this.onSetNode} />;\n        }}\n      </SharedElementSceneContext.Consumer>\n    );\n  }\n\n  componentDidUpdate() {\n    const { id } = this.props;\n    if (this.sharedId !== id) {\n      if (this.sceneData && this.sharedId && this.node) {\n        this.sceneData.removeNode(this.sharedId, this.node);\n      }\n      this.sharedId = id;\n      if (this.sceneData && this.sharedId && this.node) {\n        this.sceneData.addNode(this.sharedId, this.node);\n      }\n    }\n  }\n\n  private onSetNode = (node: SharedElementNode | null) => {\n    if (this.node === node) {\n      return;\n    }\n    if (this.sceneData && this.node && this.sharedId) {\n      this.sceneData.removeNode(this.sharedId, this.node);\n    }\n    this.node = node;\n    if (this.sceneData && this.node && this.sharedId) {\n      this.sceneData.addNode(this.sharedId, this.node);\n    }\n    this.node = node;\n  };\n}\n\nexport default SharedElement;\n"]}